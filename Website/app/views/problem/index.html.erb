<p>
  <form class="form-inline">
    <button class="btn btn-primary" type="button" data-toggle="collapse" 
      data-target="#collapse" aria-expanded="false" aria-controls="collapse">
      <%= @online_judge == nil ? "全部" : @online_judge.name %>
    </button>
    <div class="form-group">
      <div class="input-group">
        <div class="input-group-addon">编号</div>
        <input type="text" class="form-control" id="id" name="id" value=<%= params[:id] %> >
      </div>
    </div>
    <div class="form-group">
      <div class="input-group">
        <div class="input-group-addon">名称</div>
        <input type="text" class="form-control" id="name" name="name" value=<%= params[:name] %> >
      </div>
    </div>
    <button type="submit" class="btn btn-default"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></button>
  </form>
</p>
<div class="collapse" id="collapse">
  <p>
    <% ([0] + OnlineJudge::List.ids).each do |id| %>
      <%= button_to (id==0?"全部":OnlineJudge::List[id-1].name), problem_changeOJ_path(id), form: {"class"=>"form-inline", "style"=>"display:inline" }, class: "btn btn-default" %>
    <% end %>
  </p>
</div>
<table class="table table-striped table-hover table-bordered">
  <thead>
    <tr>
      <th width="10%">题库</th>
      <th width="10%">题目ID</th>
      <th width="50%">名称</th>
      <th width="20%">通过情况（S/A/S）</th>
    </tr>
  </thead>
  <tbody>
    <% @problems.each do |problem| %>
      <tr>
        <td><%= problem.online_judge.name %></td>
        <td><%= link_to problem.origin_id, problem_single_path(problem) %></td>
        <td><%= link_to problem.name, problem_single_path(problem) %></td>
        <td><%= "#{problem.statistic.solved_count}/#{problem.statistic.accepted_count}/#{problem.statistic.submissions_count}" %></td>
      </tr>
    <% end %>
    <% if @problems.size == 0 %>
      <tr>
        <td style="text-align:center" colspan="4">无</td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= pagination(:total_page=>@total_page, :current_page=>@current_page) { |page| problem_index_path(page)+"?"+@extra_url } %>
