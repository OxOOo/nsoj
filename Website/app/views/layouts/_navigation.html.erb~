<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <%= link_to 'NSOJ', root_path, class: 'navbar-brand' %>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
      	<li><%= link_to '题库', problems_index_path %></li>
      	<li><%= link_to '提交记录', status_index_path %></li>
      	<li><%= link_to '帮助', help_path %></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
      	<% if @current_user == nil%>
		    	<li><%= link_to '登录', users_login_path %></li>
		      <li><%= link_to '注册', users_register_path %></li>
      	<% else %>
		    	<li class="dropdown">
		        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><%= @current_user.username %></a>
		        <ul class="dropdown-menu" role="menu">
		          <li><%= link_to '修改密码', users_edit_path %></li>
		          <li><%= link_to '退出', users_logout_path %></li>
		          <% if @current_user.admin %>
				        <li class="divider"></li>
				        <% ProblemType.all.each do |problem_type| %>
				        	<li><%= link_to "添加#{problem_type.title}", problems_append_path(problem_type) %></li>
				        <% end %>
				        <li><%= link_to '添加传统题目', problems_append_path(0) %></li>
				        <li><%= link_to '添加SPJ题目', problems_append_path(0) %></li>
				        <li><%= link_to '添加提交答案式题目', problems_append_path(0) %></li>
				        <li><%= link_to '添加交互式题目', problems_append_path(0) %></li>
		          <% end %>
		        </ul>
		      </li>
      	<% end %>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
